<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, height=device-height, initial-scale=1, user-scalable=no">
  <meta name="description" content="API docs for the StreamTransformer.fromHandlers constructor from Class StreamTransformer from the dart:async library, for the Dart programming language.">
  <title>StreamTransformer.fromHandlers constructor - StreamTransformer - dart:async library - Dart API</title>
  


  
  
  
  
  
  <link rel="stylesheet" href="../../static-assets/github.css">
  <link rel="stylesheet" href="../../static-assets/styles.css">
  <link rel="icon" href="../../static-assets/favicon.png?v1">
  <!-- Google tag (gtag.js) -->









</head>

<body data-base-href="../../" data-using-base-href="false" class="light-theme">
<div id="overlay-under-drawer"></div>
<header id="title">
  <span id="sidenav-left-toggle" class="material-symbols-outlined" role="button" tabindex="0">menu</span>
  <ol class="breadcrumbs gt-separated dark hidden-xs">
    <li><a href="../../index.html">Dart</a></li>
    <li><a href="../../dart-async/index.html">dart:async</a></li>
    <li><a href="../../dart-async/StreamTransformer-class.html">StreamTransformer<span class="signature">&lt;<wbr><span class="type-parameter">S</span>, <span class="type-parameter">T</span>&gt;</span></a></li>
    <li class="self-crumb">StreamTransformer.fromHandlers factory constructor</li>
  </ol>
  <div class="self-name">StreamTransformer.fromHandlers</div>
  <form class="search navbar-right" role="search">
    <input type="text" id="search-box" autocomplete="off" disabled class="form-control typeahead" placeholder="Loading search...">
  </form>
  <div class="toggle" id="theme-button" title="Toggle brightness">
    <label for="theme">
      <input type="checkbox" id="theme" value="light-theme">
      <span id="dark-theme-button" class="material-symbols-outlined">
        dark_mode
      </span>
      <span id="light-theme-button" class="material-symbols-outlined">
        light_mode
      </span>
    </label>
  </div>
</header>
<main>
  <div
      id="dartdoc-main-content"
      class="main-content"
      data-above-sidebar="dart-async&#47;StreamTransformer-class-sidebar.html"
      data-below-sidebar="">
      <div>
  <div id="external-links" class="btn-group"><a title="View source code" class="source-link" href="https://github.com/dart-lang/sdk/blob/dcddfaba8d0a77a30afceae5958c2d20fa365c71/sdk/lib/async/stream.dart#L2609" target="_blank"><span class="material-symbols-outlined">description</span><sup>&#127760;</sup></a></div>
<h1><span class="kind-constructor">StreamTransformer&lt;<wbr><span class="type-parameter">S</span>, <span class="type-parameter">T</span>&gt;.fromHandlers</span> constructor 
</h1></div>

    <section class="multi-line-signature">
      
      <span class="name ">StreamTransformer&lt;<wbr><span class="type-parameter">S</span>, <span class="type-parameter">T</span>&gt;.fromHandlers</span>(<wbr>{<ol class="parameter-list"> <li><span class="parameter" id="fromHandlers-param-handleData"><span class="type-annotation">void</span> <span class="parameter-name">handleData</span>(<ol class="parameter-list single-line"> <li><span class="parameter" id="handleData-param-data"><span class="type-annotation">S</span> <span class="parameter-name">data</span>, </span></li>
<li><span class="parameter" id="handleData-param-sink"><span class="type-annotation"><a href="../../dart-async/EventSink-class.html">EventSink</a><span class="signature">&lt;<wbr><span class="type-parameter">T</span>&gt;</span></span> <span class="parameter-name">sink</span></span></li>
</ol>)?, </span></li>
<li><span class="parameter" id="fromHandlers-param-handleError"><span class="type-annotation">void</span> <span class="parameter-name">handleError</span>(<ol class="parameter-list single-line"> <li><span class="parameter" id="handleError-param-error"><span class="type-annotation"><a href="../../dart-core/Object-class.html">Object</a></span> <span class="parameter-name">error</span>, </span></li>
<li><span class="parameter" id="handleError-param-stackTrace"><span class="type-annotation"><a href="../../dart-core/StackTrace-class.html">StackTrace</a></span> <span class="parameter-name">stackTrace</span>, </span></li>
<li><span class="parameter" id="handleError-param-sink"><span class="type-annotation"><a href="../../dart-async/EventSink-class.html">EventSink</a><span class="signature">&lt;<wbr><span class="type-parameter">T</span>&gt;</span></span> <span class="parameter-name">sink</span></span></li>
</ol>)?, </span></li>
<li><span class="parameter" id="fromHandlers-param-handleDone"><span class="type-annotation">void</span> <span class="parameter-name">handleDone</span>(<ol class="parameter-list single-line"> <li><span class="parameter" id="handleDone-param-sink"><span class="type-annotation"><a href="../../dart-async/EventSink-class.html">EventSink</a><span class="signature">&lt;<wbr><span class="type-parameter">T</span>&gt;</span></span> <span class="parameter-name">sink</span></span></li>
</ol>)?, </span></li>
</ol>})
    </section>
    
<section class="desc markdown">
  <p>Creates a <a href="../../dart-async/StreamTransformer-class.html">StreamTransformer</a> that delegates events to the given functions.</p>
<p>Example use of a duplicating transformer:</p>
<pre class="language-dart"><code class="language-dart">stringStream.transform(StreamTransformer&lt;String, String&gt;.fromHandlers(
    handleData: (String value, EventSink&lt;String&gt; sink) {
      sink.add(value);
      sink.add(value);  // Duplicate the incoming events.
    }));
</code></pre>
<p>When a transformed stream returned from a call to <a href="../../dart-async/StreamTransformer/bind.html">bind</a> is listened to,
the source stream is listened to, and a handler function is called for
each event of the source stream.</p>
<p>The handlers are invoked with the event data and with a sink that can be
used to emit events on the transformed stream.</p>
<p>The <code>handleData</code> handler is invoked for data events on the source stream.
If <code>handleData</code> was omitted, data events are added directly to the created
stream, as if calling <a href="../../dart-async/EventSink/add.html">EventSink.add</a> on the sink with the event value.
If <code>handleData</code> is omitted the source stream event type, <code>S</code>, must be a
subtype of the transformed stream event type <code>T</code>.</p>
<p>The <code>handleError</code> handler is invoked for each error of the source stream.
If <code>handleError</code> is omitted, errors are forwarded directly to the
transformed stream, as if calling <a href="../../dart-async/EventSink/addError.html">EventSink.addError</a> with the error and
stack trace.</p>
<p>The <code>handleDone</code> handler is invoked when the source stream closes, as
signaled by sending a done event. The done handler takes no event value,
but can still send other events before calling <a href="../../dart-async/EventSink/close.html">EventSink.close</a>. If
<code>handleDone</code> is omitted, a done event on the source stream closes the
transformed stream.</p>
<p>If any handler calls <a href="../../dart-async/EventSink/close.html">EventSink.close</a> on the provided sink,
the transformed sink closes and the source stream subscription
is cancelled. No further events can be added to the sink by
that handler, and no further source stream events will occur.</p>
<p>The sink provided to the event handlers must only be used during
the call to that handler. It must not be stored and used at a later
time.</p>
<p>Transformers created this way should be <em>stateless</em>.
They should not retain state between invocations of handlers,
because the same transformer, and therefore the same handlers,
may be used on multiple streams, or on streams which can be listened
to more than once.
<em>To create per-stream handlers, <a href="../../dart-async/StreamTransformer/StreamTransformer.fromBind.html">StreamTransformer.fromBind</a>
could be used to create a new <a href="../../dart-async/StreamTransformer/StreamTransformer.fromHandlers.html">StreamTransformer.fromHandlers</a> per
stream to transform.</em></p>
<pre class="language-dart"><code class="language-dart">var controller = StreamController&lt;String&gt;.broadcast();
controller.onListen = () {
  scheduleMicrotask(() {
    controller.addError("Bad");
    controller.addError("Worse");
    controller.addError("Worst");
  });
};
var sharedState = 0;
var transformedStream = controller.stream.transform(
    StreamTransformer&lt;String&gt;.fromHandlers(
        handleError: (error, stackTrace, sink) {
  sharedState++; // Increment shared error-counter.
  sink.add("Error $sharedState: $error");
}));

transformedStream.listen(print);
transformedStream.listen(print); // Listen twice.
// Listening twice to the same stream makes the transformer share the same
// state. Instead of having "Error 1: Bad", "Error 2: Worse",
// "Error 3: Worst" as output (each twice for the separate subscriptions),
// this program emits:
// Error 1: Bad
// Error 2: Bad
// Error 3: Worse
// Error 4: Worse
// Error 5: Worst
// Error 6: Worst
</code></pre>
</section>


    
<section class="summary source-code" id="source">
  <h2><span>Implementation</span></h2>
  <pre class="language-dart"><code class="language-dart">factory StreamTransformer.fromHandlers({
  void handleData(S data, EventSink&lt;T&gt; sink)?,
  void handleError(Object error, StackTrace stackTrace, EventSink&lt;T&gt; sink)?,
  void handleDone(EventSink&lt;T&gt; sink)?,
}) = _StreamHandlerTransformer&lt;S, T&gt;;</code></pre>
</section>


  </div> <!-- /.main-content -->
  <div id="dartdoc-sidebar-left" class="sidebar sidebar-offcanvas-left">
    <!-- The search input and breadcrumbs below are only responsively visible at low resolutions. -->
<header id="header-search-sidebar" class="hidden-l">
  <form class="search-sidebar" role="search">
    <input type="text" id="search-sidebar" autocomplete="off" disabled class="form-control typeahead" placeholder="Loading search...">
  </form>
</header>
<ol class="breadcrumbs gt-separated dark hidden-l" id="sidebar-nav">
    <li><a href="../../index.html">Dart</a></li>
    <li><a href="../../dart-async/index.html">dart:async</a></li>
    <li><a href="../../dart-async/StreamTransformer-class.html">StreamTransformer<span class="signature">&lt;<wbr><span class="type-parameter">S</span>, <span class="type-parameter">T</span>&gt;</span></a></li>
    <li class="self-crumb">StreamTransformer.fromHandlers factory constructor</li>
</ol>

    <h5>StreamTransformer class</h5>
    <div id="dartdoc-sidebar-left-content"></div>
  </div><!--/.sidebar-offcanvas-left-->
  <div id="dartdoc-sidebar-right" class="sidebar sidebar-offcanvas-right"><ol>

      <li class="section-title"><a href="/gen-dartdocs/dart-async/StreamTransformer-class.html#constructors">Constructors</a></li>
        <li><a href="/gen-dartdocs/dart-async/StreamTransformer/StreamTransformer.html">StreamTransformer</a></li>
        <li><a href="/gen-dartdocs/dart-async/StreamTransformer/StreamTransformer.fromBind.html">fromBind</a></li>
        <li><a href="/gen-dartdocs/dart-async/StreamTransformer/StreamTransformer.fromHandlers.html">fromHandlers</a></li>


    
        <li class="section-title inherited">
          <a href="/gen-dartdocs/dart-async/StreamTransformer-class.html#instance-properties">Properties</a>
        </li>
          
<li class="inherited">
  <a href="/gen-dartdocs/dart-core/Object/hashCode.html">hashCode</a>
</li>
          
<li class="inherited">
  <a href="/gen-dartdocs/dart-core/Object/runtimeType.html">runtimeType</a>
</li>

        <li class="section-title"><a href="/gen-dartdocs/dart-async/StreamTransformer-class.html#instance-methods">Methods</a></li>
          
<li>
  <a href="/gen-dartdocs/dart-async/StreamTransformer/bind.html">bind</a>
</li>
          
<li>
  <a href="/gen-dartdocs/dart-async/StreamTransformer/cast.html">cast</a>
</li>
          
<li class="inherited">
  <a href="/gen-dartdocs/dart-core/Object/noSuchMethod.html">noSuchMethod</a>
</li>
          
<li class="inherited">
  <a href="/gen-dartdocs/dart-core/Object/toString.html">toString</a>
</li>

        <li class="section-title inherited"><a href="/gen-dartdocs/dart-async/StreamTransformer-class.html#operators">Operators</a></li>
          
<li class="inherited">
  <a href="/gen-dartdocs/dart-core/Object/operator_equals.html">operator ==</a>
</li>

    

    

      <li class="section-title"><a href="/gen-dartdocs/dart-async/StreamTransformer-class.html#static-methods">Static methods</a></li>
        <li><a href="/gen-dartdocs/dart-async/StreamTransformer/castFrom.html">castFrom</a></li>

</ol>
</div><!--/.sidebar-offcanvas-->
</main>
<footer>
  <span class="no-break">
    Dart
      3.7.1
  </span>
  <span class="glue-footer">
  <span class="no-break">
    | <a href="https://dart.dev/terms" title="Terms of use" target="_blank">Terms<sup>&#127760;</sup></a>
  </span>
  <span class="no-break">
    | <a href="https://policies.google.com/privacy" target="_blank" rel="noopener" title="Privacy policy"
      class="no-automatic-external" target="_blank">Privacy<sup>&#127760;</sup></a>
  </span>
  <span class="no-break">
    | <a href="https://dart.dev/security" title="Security philosophy and practices" target="_blank">Security<sup>&#127760;</sup></a>
  </span>

  <div class="copyright" style="font-size: 0.9em; color: darkgrey; margin-top: 0.5em;">
    Except as otherwise noted, this site is licensed under a
    <a style="color: darkgrey;" href="https://creativecommons.org/licenses/by/4.0/" target="_blank">
      Creative Commons Attribution 4.0 International License<sup>&#127760;</sup></a>
    and code samples are licensed under the
    <a style="color: darkgrey;" href="https://opensource.org/licenses/BSD-3-Clause" class="no-automatic-external" target="_blank">
      3-Clause BSD License<sup>&#127760;</sup></a>
  </div>
</span>

</footer>




<button aria-hidden="true" class="glue-footer__link glue-cookie-notification-bar-control">
  Cookies management controls
</button>


</body>
</html>

